<!-- Button to trigger modal -->
<button id="newPostBtn" onclick="my_modal_1.showModal()" class="bg-[#B12C00] hover:bg-[#c17962] text-white px-6 py-3 rounded-lg shadow-md  transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-[#c17962] focus:ring-opacity-50">
  + New Post
</button>
<dialog id="my_modal_1" class="modal" data-controller="post">
  <div class="modal-box">
<h2 class="text-3xl font-bold text-gray-900 mb-6 text-center">Create New Post</h2>

<%= tag.div data: { controller: "post-form" } do %>
  <form
    id="postForm"
    data-post-form-target="form"
    class="post-form"
  >

  <div class="form-group hidden">
  <label for="image-url-input" class="block text-lg font-medium text-gray-700 mb-2">Image URL</label>
  <input
    type="text"
    id="image-url-input"
    name="image_url"
    data-post-form-target="imageUrl"
    class="hidden mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-lg outline-none"
    placeholder="https://example.com/image.jpg"
  />
</div>

<div class="form-group mt-4">
  <label for="image-file-input" class="block text-lg font-medium text-gray-700 mb-2">Or Upload Image File</label>
  <input
    type="file"
    id="image-file-input"
    name="image_file"
    data-post-form-target="imageFile"
    accept="image/*"
    class="block w-full text-lg text-gray-600 file:mr-4 file:py-2 file:px-4 file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200"
  />
</div>


    <div class="form-group">
      <label for="caption-input" class="block text-lg font-medium text-gray-700 mb-2">Caption</label>
      <textarea
        id="caption-input"
        name="caption"
        rows="3"
        data-post-form-target="caption"
        class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-lg outline-none"
        placeholder="Write a caption..."
      ></textarea>
    </div>

      <div class="form-group">
        <div class="mb-4">
        <label for="date" class="block text-sm font-medium text-gray-700 mb-1">Schedule Date</label>
        <input
          type="date"
          name="date"
          id="date"
          data-action="change->post-form#dateChanged"
          value="<%= Date.current.strftime('%Y-%m-%d') %>"
          class="w-full px-4 py-2 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-[#B12C00] focus:border-[#B12C00] transition duration-150"
        />
      </div>
      </div>
    <div>
      <p class="block text-lg font-medium text-gray-700 mb-3">Select Social Media Platforms:</p>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <% if @user.ig_user_id %>
          <label class="flex items-center p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-50">
            <input
              type="checkbox"
              name="post_to_ig"
              value="1"
              data-post-form-target="ig"
              class="form-checkbox h-5 w-5 text-blue-600 rounded"
            />
            <span class="ml-3 text-2xl"><i class="fab fa-instagram text-danger"></i></span>
            <span class="ml-3 text-lg font-medium text-gray-800">Instagram</span>
          </label>
        <% end %>

        <% if @user.fb_page_id %>
          <label class="flex items-center p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-50">
            <input
              type="checkbox"
              name="post_to_fb"
              value="1"
              data-post-form-target="fb"
              class="form-checkbox h-5 w-5 text-blue-600 rounded"
            />
            <span class="ml-3 text-2xl"><i class="fab fa-facebook text-primary"></i></span>
            <span class="ml-3 text-lg font-medium text-gray-800">Facebook</span>
          </label>
        <% end %>
      </div>
    </div>

    <div class="form-group mt-3 flex items-center justify-center">
      <button
        type="button"
        data-post-form-target="btnPost"
        data-action="click->post-form#submit"
        class="publish-btn bg-[#B12C00] text-white px-5 py-2.5 rounded-lg shadow-md hover:bg-[#c17962] transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-[#c17962] focus:ring-opacity-50"
      >
        Create Now
      </button>

    </div>
  </form>
<% end %>
<div class="flex items-center justify-center mt-2 mb-2">
  <h6 class="text-2xl capitalize ">Before you post, pause and log in</h6>
</div>
  <div class="flex flex-wrap gap-4 mt-2">
        <% unless @user.ig_user_id && @user.fb_page_id  %>
            <%= link_to "/auth/facebook", class: "btn bg-[#1A77F2] text-white border-[#005fd8]" do %>
                  <svg aria-label="Facebook logo" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path fill="white" d="M8 12h5V8c0-6 4-7 11-6v5c-4 0-5 0-5 3v2h5l-1 6h-4v12h-6V18H8z"></path></svg>
                  Login with Facebook
            <%end%>
        <%end%>
        <!-- X -->
    <button class="btn bg-black text-white border-black">
      <svg aria-label="X logo" width="16" height="12" viewBox="0 0 300 271" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="m236 0h46l-101 115 118 156h-92.6l-72.5-94.8-83 94.8h-46l107-123-113-148h94.9l65.5 86.6zm-16.1 244h25.5l-165-218h-27.4z"/></svg>
      Login with X
    </button>

    <!-- LinkedIn -->
    <button class="btn bg-[#0967C2] text-white border-[#0059b3]">
      <svg aria-label="LinkedIn logo" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path fill="white" d="M26.111,3H5.889c-1.595,0-2.889,1.293-2.889,2.889V26.111c0,1.595,1.293,2.889,2.889,2.889H26.111c1.595,0,2.889-1.293,2.889-2.889V5.889c0-1.595-1.293-2.889-2.889-2.889ZM10.861,25.389h-3.877V12.87h3.877v12.519Zm-1.957-14.158c-1.267,0-2.293-1.034-2.293-2.31s1.026-2.31,2.293-2.31,2.292,1.034,2.292,2.31-1.026,2.31-2.292,2.31Zm16.485,14.158h-3.858v-6.571c0-1.802-.685-2.809-2.111-2.809-1.551,0-2.362,1.048-2.362,2.809v6.571h-3.718V12.87h3.718v1.686s1.118-2.069,3.775-2.069,4.556,1.621,4.556,4.975v7.926Z" fill-rule="evenodd"></path></svg>
      Login with LinkedIn
    </button>
    </div>



    <!-- Modal Close -->
    <div class="modal-action mt-4">
      <form method="dialog">
        <button class="btn rounded-full w-[100px] bg-[#B12C00] hover:bg-[#c17962] text-white"><i class="fa-solid fa-xmark"></i></button>
      </form>
    </div>
  </div>
</dialog>
