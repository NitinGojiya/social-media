<!-- Button to trigger modal -->
<button id="newPostBtn" onclick="my_modal_1.showModal()" class="bg-[#673386] text-white px-6 py-3 rounded-lg shadow-md hover:bg-[#9158b4] transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-[#9158b4] focus:ring-opacity-50">
  + New Post
</button>
<dialog id="my_modal_1" class="modal" data-controller="post">
  <div class="modal-box">
<h2 class="text-3xl font-bold text-gray-900 mb-6 text-center">Create New Post</h2>

<%= tag.div data: { controller: "post-form" } do %>
  <form
    id="postForm"
    data-post-form-target="form"
    class="post-form"
  >
    <div class="form-group">
      <label for="image-url-input" class="block text-lg font-medium text-gray-700 mb-2">Image URL</label>
      <input
        type="text"
        id="image-url-input"
        name="image_url"
        data-post-form-target="imageUrl"
        class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-lg outline-none"
        placeholder="https://example.com/image.jpg"
      />
    </div>

    <div class="form-group">
      <label for="caption-input" class="block text-lg font-medium text-gray-700 mb-2">Caption</label>
      <textarea
        id="caption-input"
        name="caption"
        rows="3"
        data-post-form-target="caption"
        class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-lg outline-none"
        placeholder="Write a caption..."
      ></textarea>
    </div>

    <div>
      <p class="block text-lg font-medium text-gray-700 mb-3">Select Social Media Platforms:</p>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <% if session[:ig_user_id] %>
          <label class="flex items-center p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-50">
            <input
              type="checkbox"
              name="post_to_ig"
              value="1"
              data-post-form-target="ig"
              class="form-checkbox h-5 w-5 text-blue-600 rounded"
            />
            <span class="ml-3 text-2xl"><i class="fab fa-instagram text-danger"></i></span>
            <span class="ml-3 text-lg font-medium text-gray-800">Instagram</span>
          </label>
        <% end %>

        <% if session[:ig_user_id] %>
          <label class="flex items-center p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-50">
            <input
              type="checkbox"
              name="post_to_fb"
              value="1"
              data-post-form-target="fb"
              class="form-checkbox h-5 w-5 text-blue-600 rounded"
            />
            <span class="ml-3 text-2xl"><i class="fab fa-facebook text-primary"></i></span>
            <span class="ml-3 text-lg font-medium text-gray-800">Facebook</span>
          </label>
        <% end %>
      </div>
    </div>

    <div class="form-group mt-3">
      <button
        type="button"
        data-action="click->post-form#submit"
        class="publish-btn bg-[#B12C00] text-white px-5 py-2.5 rounded-lg shadow-md hover:bg-[#c17962] transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-[#c17962] focus:ring-opacity-50"
      >
        Post Now
      </button>
    </div>
  </form>
<% end %>


    <% unless session[:ig_user_id] && session[:fb_page_id]  %>
      <%= link_to "/auth/facebook", class: "btn btn-success mt-3 fb-login-btn" do %>
        facebook
        <%end%>
    <%end%>

    <!-- Modal Close -->
    <div class="modal-action mt-4">
      <form method="dialog">
        <button class="btn">Close</button>
      </form>
    </div>
  </div>
</dialog>
