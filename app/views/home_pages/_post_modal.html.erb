<!-- Button to trigger modal -->
<button id="newPostBtn" onclick="my_modal_1.showModal()" class="bg-blue-600 text-white px-6 py-3 rounded-lg shadow-md hover:bg-blue-700 transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
  + New Post
</button>
<dialog id="my_modal_1" class="modal" data-controller="post">
  <div class="modal-box">
<h2 class="text-3xl font-bold text-gray-900 mb-6 text-center">Create New Post</h2>

<%= form_with url: instagrams_path, method: :post, local: true, html: { class: "post-form" } do |f| %>
  <div class="form-group">
    <%= f.label :image_url, "Image URL", class: "block text-lg font-medium text-gray-700 mb-2" %>
    <%= f.text_field :image_url, class: "mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-lg outline-none", placeholder: "https://example.com/image.jpg", id: "image-url-input" %>
  </div>

  <div class="form-group">
    <%= f.label :caption, "Caption", class: "block text-lg font-medium text-gray-700 mb-2" %>
    <%= f.text_area :caption, class: "mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-lg outline-none", rows: 3, placeholder: "Write a caption..." %>
  </div>

  <div>
        <p class="block text-lg font-medium text-gray-700 mb-3">Select Social Media Platforms:</p>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <% if session[:ig_user_id] %>
                   <%= f.label :post_to_ig, class: "flex items-center p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-50" do %>
                    <%= f.check_box :post_to_ig, { class: "form-checkbox h-5 w-5 text-blue-600 rounded" }, "1", "0" %>
                    <span class="ml-3 text-2xl"><i class="fab fa-instagram text-danger"></i></span>
                    <span class="ml-3 text-lg font-medium text-gray-800">Instagram</span>
                    <% end %>
            <%end%>

        <% if session[:ig_user_id] %>
          <%= f.label :post_to_fb, class: "flex items-center p-3 border border-gray-200 rounded-md cursor-pointer hover:bg-gray-50" do %>
          <%= f.check_box :post_to_fb, { class: "form-checkbox h-5 w-5 text-blue-600 rounded" }, "1", "0" %>
          <span class="ml-3 text-2xl"><i class="fab fa-facebook text-primary"></i></span>
          <span class="ml-3 text-lg font-medium text-gray-800">Facebook</span>
          <% end %>
        <%end%>
        </div>
    </div>
    <div class="form-group mt-3">
        <%= f.submit " Post Now", class: "btn btn-primary submit-btn" %>
    </div>
    <% end %>
    <% unless session[:ig_user_id] && session[:fb_page_id]  %>
      <%= link_to "/auth/facebook", class: "btn btn-success mt-3 fb-login-btn" do %>
        facebook
        <%end%>
    <%end%>

    <!-- Modal Close -->
    <div class="modal-action mt-4">
      <form method="dialog">
        <button class="btn">Close</button>
      </form>
    </div>
  </div>
</dialog>
