

<!-- Edit Post Modal -->
<%= render 'edit_post_form' %>
<% @posts_future.each do |post| %>
  <div class="relative w-full mx-auto bg-white shadow-lg rounded-2xl overflow-hidden flex flex-col md:flex-row">

    <!-- Delete Buttons -->
    <div class="absolute top-2 right-2 z-10 flex gap-2">
        <%= button_to scheduled_posts_delete_path(post), method: :delete, data: { confirm: "Are you sure?" }, class: "cust-btn text-white px-3 py-3 rounded-lg shadow-md  transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-opacity-50" do %>
                <i class="fa-solid fa-trash text-xl"></i>
              <% end %>
    </div>

    <!-- Left: Media -->
    <div class="w-full md:w-1/3 bg-gray-100 flex items-center justify-center">
      <% if post.photos.attached? %>
        <div class="flex gap-1 overflow-x-auto">
          <% post.photos.each do |media| %>
            <div class="min-w-[12rem]">
              <% if media.image? %>
                <%= link_to rails_blob_url(media, host: Rails.application.routes.default_url_options[:host]) do %>
                  <img src="<%= url_for(media) %>" alt="Post image" loading="lazy"
                       class="rounded-xl object-cover w-full h-48" />
                <% end %>
              <% elsif media.video? %>
                <%= link_to rails_blob_url(media, host: Rails.application.routes.default_url_options[:host]) do %>
                  <video controls class="rounded-xl object-cover w-full h-48">
                    <source src="<%= url_for(media) %>" type="<%= media.content_type %>">
                    Your browser does not support the video tag.
                  </video>
                <% end %>
              <% end %>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>

    <!-- Right: Details -->
    <div class="w-full md:w-2/3 p-5 flex flex-col justify-between">
      <div>
        <h3 class="text-lg font-semibold text-gray-900">
          <%= [("Facebook" if post.fb==1),
               ("Instagram" if post.ig==1),
               ("Twitter" if post.twitter==1),
               ("LinkedIn" if post.linkedin==1)].compact.join(", ") %>
        </h3>
        <p class="text-sm text-gray-500">Scheduled for <%= post.scheduled_at&.strftime("%B %d, %Y") %></p>
        <p class="text-sm text-gray-500">
          <%= truncate(post.caption, length: 60) %>
        </p>
      </div>
      <div class="mt-4">
         <button
             data-controller="edit-modal"
            data-action="click->edit-modal#open"
            data-post-id="<%= post.id %>"
            data-post-caption="<%= post.caption %>"
            data-post-scheduled-at="<%= post.scheduled_at %>"
            data-post-fb="<%= post.fb %>"
            data-post-ig="<%= post.ig %>"
            data-post-linkedin="<%= post.linkedin %>"
            data-post-twitter="<%= post.twitter %>"
            class="publish-btn cust-btn mt-5  px-5 py-2.5 rounded-lg shadow-md  transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-opacity-50"
            onclick="edit.showModal()">Edit Post</button>
      </div>
    </div>
  </div>
<% end %>


